<section
  class="container py-5 text-center d-none d-md-flex py-md-3 px-md-3 py-lg-7 px-lg-7 my-md-5 mx-md-5 my-lg-5 mx-lg-5"
>
  <div class="title mb-4">Subscribe to our newsletter</div>
  <p class="subtitle mb-5">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros
    elementum tristique.
  </p>
  <div class="">
    <form action="">
      <div class="d-flex gap-2 mb-3">
        <input type="email" class="form-control" id="email-input" placeholder="Enter your email" />
        <button type="button" class="btn" id="signUp-button"> Sign&nbsp;Up </button>
      </div>
    </form>
  </div>

  <div class="note">
    By clicking Sign Up you're confirming that you agree with our Terms and Conditions.
  </div>
</section>

<script>
  // Subscription mail
  import emailjs from "@emailjs/browser";

  emailjs.init({
    publicKey: "OMeyLonP6tEyaMxVg",
  });

  document.getElementById("signUp-button")?.addEventListener("click", function () {
    const emailInput = document.getElementById("email-input");

    if (emailInput && emailInput instanceof HTMLInputElement) {
      const email = emailInput.value;
      // validation check
      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailPattern.test(email)) {
        alert("Please enter a valid email address.");
        return;
      }

      emailjs
        .send("service_uz36kw8", "template_ocvng8t", {
          email: email,
        })
        .then(
          function (response) {
            console.log("SUCCESS!", response.status, response.text);
            alert("Subscription successful!");
          },
          function (error) {
            console.error("FAILED...", error);
            alert("Subscription failed. Please try again.");
          }
        );
    }
  });
</script>

<style>
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
  }
  .title {
    font-size: 3rem;
    font-weight: bold;
  }
  .subtitle {
    font-size: 1.1rem;
  }
  .note {
    font-size: 0.7rem;
  }
  .form-control,
  .btn {
    padding: 0.75rem 0.75rem;
  }
  input {
    background-color: var(--secondary-color);
    border-color: var(--primary-color);
    color: var(--primary-color);
    margin-left: 0;
    width: 30rem;
  }
  button {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--secondary-color);
    margin-left: 0;
  }
  button:hover {
    background-color: var(--secondary-color);
    border-color: var(--primary-color);
    color: var(--primary-color);
  }
  @media (min-width: 992px) {
    .py-lg-7 {
      padding-top: 4rem !important;
      padding-bottom: 4rem !important;
    }
    .px-lg-7 {
      padding-left: 15rem !important;
      padding-right: 15rem !important;
    }
  }
</style>
